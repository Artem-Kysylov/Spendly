Generative AI

ÐžÑ‚Ð»Ð¸Ñ‡Ð½Ð¾Ðµ ÑƒÑ‚Ð¾Ñ‡Ð½ÐµÐ½Ð¸Ðµ. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ Supabase ÑƒÐ¿Ñ€Ð¾Ñ‰Ð°ÐµÑ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ Ñ Ð±ÑÐºÐµÐ½Ð´Ð¾Ð¼, Ð½Ð¾ Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐµÑ‚ Ð½ÑŽÐ°Ð½ÑÑ‹ Ð² Ð¼Ð°Ð¿Ð¿Ð¸Ð½Ð³ Ð´Ð°Ð½Ð½Ñ‹Ñ… (Ð½ÑƒÐ¶Ð½Ð¾ ÑÐ¾Ð¾Ñ‚Ð½Ð¾ÑÐ¸Ñ‚ÑŒ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ñ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹ Ð¾Ñ‚ AI Ñ UUID Ð±ÑŽÐ´Ð¶ÐµÑ‚Ð¾Ð² Ð² Ð±Ð°Ð·Ðµ).
Ð’Ð¾Ñ‚ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ‹Ð¹ Ð¸ Ð°Ð´Ð°Ð¿Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ Ð¿Ð¾Ð´ Supabase Ñ‡ÐµÐºÐ»Ð¸ÑÑ‚. Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹ ÐµÐ³Ð¾ Ð² ÑÐ²Ð¾ÑŽ IDE.
ðŸ“‹ Ð§ÐµÐºÐ»Ð¸ÑÑ‚: Ð ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ "Generative UI" Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¹ (Supabase Stack)
ÐšÐ¾Ð½Ñ‚ÐµÐºÑÑ‚: Ð ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ñ‚ÑŒ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð», Ð³Ð´Ðµ AI Ñ€Ð°ÑÐ¿Ð¾Ð·Ð½Ð°ÐµÑ‚ Ð½Ð°Ð¼ÐµÑ€ÐµÐ½Ð¸Ñ Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ‚Ñ€Ð°Ñ‚Ñ‹ Ð¸Ð· Ñ‚ÐµÐºÑÑ‚Ð° Ñ‡Ð°Ñ‚Ð°, Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð¸Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ð¹ UI-ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚ (Draft), Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð¼Ð¾Ð¶ÐµÑ‚ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð´Ð°Ð½Ð½Ñ‹Ðµ (UI), Ð¸ Ð¿Ñ€Ð¸ Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ðµ ÑƒÐ»ÐµÑ‚Ð°ÑŽÑ‚ Ð² Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñƒ transactions Ð² Supabase.
1. Backend & System Prompt (ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ° Ð´Ð°Ð½Ð½Ñ‹Ñ…)
 * [ ] Fetch Context: Ð’ API Ñ€Ð¾ÑƒÑ‚Ðµ Ñ‡Ð°Ñ‚Ð° (Ð¿ÐµÑ€ÐµÐ´ Ð²Ñ‹Ð·Ð¾Ð²Ð¾Ð¼ Ð¼Ð¾Ð´ÐµÐ»Ð¸) Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ ÑÐ¿Ð¸ÑÐ¾Ðº Ð±ÑŽÐ´Ð¶ÐµÑ‚Ð¾Ð² Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð¸Ð· Supabase:
   * const { data: budgets } = await supabase.from('budgets').select('id, name, emoji');
 * [ ] System Prompt Injection:
   * ÐŸÐµÑ€ÐµÐ´Ð°Ñ‚ÑŒ ÑÐ¿Ð¸ÑÐ¾Ðº Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ð¹ Ð±ÑŽÐ´Ð¶ÐµÑ‚Ð¾Ð² Ð² ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð¿Ñ€Ð¾Ð¼Ð¿Ñ‚.
   * Ð˜Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ñ: "Map user input to one of the following budget names: ${budgets.map(b => b.name).join(', ')}. If precise match fails, pick the most logical one."
 * [ ] Tool Definition (propose_transactions):
   * ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹: title, amount, type ('expense' | 'income'), suggested_budget_name (string), date (ISO).
2. Frontend Component: TransactionProposalCard
Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚ Ð´Ð»Ñ Ñ€ÐµÐ½Ð´ÐµÑ€Ð¸Ð½Ð³Ð° toolInvocation Ð²Ð½ÑƒÑ‚Ñ€Ð¸ Ñ‡Ð°Ñ‚Ð°.
State Management:
 * isEditing: boolean (default: false).
 * status: 'pending' | 'saving' | 'saved' | 'error'.
 * formData: object (Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð°Ñ ÐºÐ¾Ð¿Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð´Ð»Ñ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ).
UI: Preview Mode (Ð ÐµÐ¶Ð¸Ð¼ Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€Ð°)
 * [ ] Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Card Ð¸Ð· shadcn.
 * [ ] ÐžÑ‚Ð¾Ð±Ñ€Ð°Ð¶Ð°Ñ‚ÑŒ Ð´Ð°Ð½Ð½Ñ‹Ðµ: ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ, Ð¡ÑƒÐ¼Ð¼Ð° (Ñ†Ð²ÐµÑ‚Ð½Ð°Ñ), Ð”Ð°Ñ‚Ð°.
 * [ ] Budget Badge: ÐžÑ‚Ð¾Ð±Ñ€Ð°Ð¶Ð°Ñ‚ÑŒ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð±ÑŽÐ´Ð¶ÐµÑ‚Ð° Ð¸ ÑÐ¼Ð¾Ð´Ð·Ð¸ (Ð½Ð°Ð¹Ñ‚Ð¸ Ð±ÑŽÐ´Ð¶ÐµÑ‚ Ð² Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¼ ÑÑ‚Ð¾Ñ€Ðµ/ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚Ðµ Ð¿Ð¾ Ð¸Ð¼ÐµÐ½Ð¸, ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ðµ Ð²ÐµÑ€Ð½ÑƒÐ» AI).
 * [ ] Buttons: "Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ" (Ghost), "ÐŸÐ¾Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¸Ñ‚ÑŒ" (Primary), "ÐžÑ‚Ð¼ÐµÐ½Ð°" (Destructive).
UI: Edit Mode (Ð ÐµÐ¶Ð¸Ð¼ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ)
 * [ ] Form Fields: ÐŸÑ€ÐµÐ²Ñ€Ð°Ñ‚Ð¸Ñ‚ÑŒ Ñ‚ÐµÐºÑÑ‚ Ð² Ð¸Ð½Ð¿ÑƒÑ‚Ñ‹ (Input).
 * [ ] Budget Selector (ÐšÑ€Ð¸Ñ‚Ð¸Ñ‡Ð½Ð¾):
   * Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Select (shadcn) Ð¸Ð»Ð¸ Combobox.
   * Options: Ð ÐµÐ½Ð´ÐµÑ€Ð¸Ñ‚ÑŒ ÑÐ¿Ð¸ÑÐ¾Ðº Ñ€ÐµÐ°Ð»ÑŒÐ½Ñ‹Ñ… Ð±ÑŽÐ´Ð¶ÐµÑ‚Ð¾Ð² Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ (Ð½ÑƒÐ¶Ð½Ð¾ Ð¿Ñ€Ð¾ÐºÐ¸Ð½ÑƒÑ‚ÑŒ ÑÐ¿Ð¸ÑÐ¾Ðº Ð±ÑŽÐ´Ð¶ÐµÑ‚Ð¾Ð² Ð² ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚ Ñ‡Ð°Ñ‚Ð° Ð¸Ð»Ð¸ Ð±Ñ€Ð°Ñ‚ÑŒ Ð¸Ð· Ð³Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ ÑÑ‚Ð¾Ñ€Ð°/SWR/React Query).
   * Value: ÐŸÑ€Ð¸ Ð²Ñ‹Ð±Ð¾Ñ€Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÑ‚ÑŒ budget_id Ð¸ budget_name Ð² ÑÑ‚ÐµÐ¹Ñ‚ formData.
 * [ ] Date Picker: Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Popover + Calendar (shadcn) Ð´Ð»Ñ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð´Ð°Ñ‚Ñ‹.
 * [ ] Actions: ÐšÐ½Ð¾Ð¿ÐºÐ¸ "Ð“Ð¾Ñ‚Ð¾Ð²Ð¾" (Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ + Ð²Ñ‹Ñ…Ð¾Ð´ Ð¸Ð· Ñ€ÐµÐ¶Ð¸Ð¼Ð° Ð¿Ñ€Ð°Ð²ÐºÐ¸) Ð¸ "ÐÐ°Ð·Ð°Ð´".
3. Supabase Integration (Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ)
 * [ ] Data Mapping:
   * ÐŸÐµÑ€ÐµÐ´ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸ÐµÐ¼ Ð½Ð°Ð¹Ñ‚Ð¸ budget_id, ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ð¹ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½Ð¾Ð¼Ñƒ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸ÑŽ Ð±ÑŽÐ´Ð¶ÐµÑ‚Ð° (ÐµÑÐ»Ð¸ AI Ð²ÐµÑ€Ð½ÑƒÐ» Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¸Ð¼Ñ, Ð½Ð°Ð¼ Ð½ÑƒÐ¶Ð½Ð¾ Ð½Ð°Ð¹Ñ‚Ð¸ UUID Ð¿ÐµÑ€ÐµÐ´ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¾Ð¹ Ð² Ð‘Ð”).
 * [ ] Insert Function:
   * Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Server Action Ð¸Ð»Ð¸ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð°:
     const { error } = await supabase
  .from('transactions')
  .insert({
    user_id: user.id,
    name: formData.title,
    amount: formData.amount,
    type: formData.type, // 'expense' or 'income'
    budget_id: matchedBudgetId, // UUID
    date: formData.date,
    created_at: new Date().toISOString()
  });

 * [ ] Error Handling: Ð•ÑÐ»Ð¸ budget_id Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½ (AI Ð²Ñ‹Ð´ÑƒÐ¼Ð°Ð» ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ, Ð° ÑŽÐ·ÐµÑ€ Ð½Ðµ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð¸Ð») -> Ð½Ðµ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÑ‚ÑŒ Ð·Ð°Ð¿Ñ€Ð¾Ñ, Ð¿Ð¾Ð´ÑÐ²ÐµÑ‚Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð»Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸ ÐºÑ€Ð°ÑÐ½Ñ‹Ð¼ Ð¸ Ð²ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ñ€ÐµÐ¶Ð¸Ð¼ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¿Ñ€Ð¸Ð½ÑƒÐ´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾.
4. Post-Save UX (ÐžÐ±Ñ€Ð°Ñ‚Ð½Ð°Ñ ÑÐ²ÑÐ·ÑŒ)
 * [ ] Update UI: ÐŸÐ¾ÑÐ»Ðµ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð³Ð¾ insert:
   * Ð¡Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚ÑƒÑ ÐºÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ¸ Ð½Ð° 'saved'.
   * Ð—Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÐºÐ½Ð¾Ð¿ÐºÐ¸ Ð¸ Ð¸Ð½Ð¿ÑƒÑ‚Ñ‹.
   * ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð·ÐµÐ»ÐµÐ½ÑƒÑŽ Ð¿Ð»Ð°ÑˆÐºÑƒ: "âœ… Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¾ Ð² [ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð±ÑŽÐ´Ð¶ÐµÑ‚Ð°]".
 * [ ] Revalidate: Ð’Ñ‹Ð·Ð²Ð°Ñ‚ÑŒ router.refresh() Ð¸Ð»Ð¸ Ð¸Ð½Ð²Ð°Ð»Ð¸Ð´Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÐºÑÑˆ React Query/SWR, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¾Ð±Ð½Ð¾Ð²Ð¸Ð»ÑÑ Ð±Ð°Ð»Ð°Ð½Ñ Ð¸ ÑÐ¿Ð¸ÑÐ¾Ðº Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¹ Ð½Ð° Ñ„Ð¾Ð½Ðµ.
 * [ ] Toast: ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ toast.success("Ð¢Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ñ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð°").
ÐŸÐ¾Ð´ÑÐºÐ°Ð·ÐºÐ° Ð´Ð»Ñ Ð¼Ð¾Ð´ÐµÐ»Ð¸:
> "Ensure strict typing for the transaction object. When mapping the AI's suggested category name to the Supabase budget_id, perform a case-insensitive search through the user's available budgets. If no match is found, default to a generic 'Uncategorized' bucket or force the user to select a budget manually."
> 
