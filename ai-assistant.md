


          
**Чеклист**

1. Уточнить UX/поведение: «шторка» справа на десктопе, полноэкранно на мобиле, оверлей, заголовок, крестик закрытия, без анимации «блесток».
2. ✅ Провести аудит текущего виджета ассистента: компоненты, состояние открытия/закрытия, плавающая кнопка, стили светлой/тёмной темы.
3. ✅ Добавить/проверить наличие компонента `Sheet` из shadcn (если нет — подключить).
4. ✅ Создать контейнер `ChatSheet` (использовать `Sheet`, `SheetTrigger`, `SheetContent`, `SheetHeader`, `SheetTitle`, `SheetClose`).
5. ✅ Перенести весь контент чата (сообщения, инпут, быстрые подсказки, выбор тона) внутрь `SheetContent`.
6. ✅ Перевести управление состоянием открытия в единый источник: контекст/хук (например, расширить `useChat` или `useModal`) с `isOpen` и методами `open/close`.
7. ✅ Заменить плавающую кнопку на `SheetTrigger` с текущим стилем FAB, скрывать её при открытой шторке.
8. ✅ Удалить логику анимации «sparkles» и переключения иконки; оставить стандартный `X` через `SheetClose`.
9. ✅ Настроить десктоп-верстку: `side="right"`, ширина `max-w-[420–480px]`, скругление слева, бордер, без лишнего паддинга.
10. ✅ Настроить мобильную верстку: `w-screen h-screen`, убрать скругления, учесть `safe-area` (вырезы), корректные отступы для клавиатуры.
11. ✅ Применить токены темизации shadcn/tailwind: `bg-background`, `text-foreground`, `border-border`, `ring-ring` и т. п. для светлой/тёмной темы.
12. ✅ Обеспечить доступность: `aria-label` для триггера и закрытия, возврат фокуса к триггеру, фокус-трап внутри шторки, клавиатурные шорткаты.
13. ✅ Перенести/адаптировать обработчики: отправка сообщения, выбор подсказок, смена тона, авто-скролл к новым сообщениям (виртуализация пока не требуется).
14. ✅ Настроить анимацию шторки: согласованная длительность/эйзинг, без конфликтов со старыми анимациями FAB.
15. ✅ Проверить поведение навигации: состояние сохраняется в `(protected)/layout.tsx`; SSR/гидратация корректны, layout shift отсутствует.
16. ✅ Обновить стили и z-index: корректные слои (`overlay z-[100]`, `content z-10`), триггер скрывается при открытой шторке.
17. ✅ Очистка кода: исключены конфликтные хендлеры у `motion.div`, удалены старые фиксированные контейнеры, отключены анимации FAB.
18. Провести QA: десктоп/мобайл, светлая/тёмная тема, открытие/закрытие, отправка, подсказки, перезагрузка страницы.
19. Добавить базовые тесты (если возможно): рендер `Sheet`, открытие по триггеру, доступность, снапшоты основных состояний.
20. Обновить документацию: краткое описание нового UX, пути компонентов, инструкции по стилям и поддержке тем.
        